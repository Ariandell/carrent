<!DOCTYPE html>
<html lang="uk" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-config="PROJECT_NAME">FPV Racer - Керування в реальному часі</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/tailwind_config.js"></script>
    <link href="./css/antigravity.css?v=99" rel="stylesheet">
    <script src="js/config.js?v=99"></script>
    <script src="js/lang.js?v=99"></script>
    <script src="js/theme.js?v=99"></script>
</head>

<body
    class="min-h-screen bg-[var(--bg-core)] text-[var(--text-primary)] transition-colors duration-500 overflow-x-hidden">

    <!-- Theme Toggle Removed (Moved to Settings) -->

    <!-- Navbar -->
    <nav class="nav-glass fixed top-0 left-0 right-0 z-40 border-b border-[var(--divider)]">
        <div class="container mx-auto px-6 h-16 flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-3">
                <div
                    class="w-10 h-10 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                </div>
                <span class="text-xl font-bold tracking-wide" data-config="PROJECT_NAME">(NAME)</span>
            </a>
            <div class="flex items-center gap-4">
                <a href="auth.html" id="authLink"
                    class="btn-primary px-6 py-2.5 rounded-xl font-medium text-sm transition-all hover:shadow-[0_0_20px_rgba(37,99,235,0.5)]"
                    data-i18n="btn_login_register">
                    Вхід / Реєстрація
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="min-h-screen flex items-center justify-center relative pt-20">
        <!-- Background Glows (Blue Only) -->
        <!-- Background Layers -->
        <!-- Background Layers -->
        <!-- Base Color is now on body -->

        <!-- Sparks Container will be injected here by JS with z-index -2 (actually needs to be relative to this section or fixed) -->
        <!-- Fixed Sparks Container is injected by JS to body path, so we need a glass overlay on TOP of it but BEHIND content? -->
        <!-- User said: "matte glass on background and sparks fly behind it" -->
        <!-- Implementation: Body (Sparks fixed) -> Overlay (Fixed Glass) -> Content (Relative) -->



        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full max-w-7xl hero-glow pointer-events-none z-0">
        </div>

        <div class="container mx-auto px-6 relative z-10">
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <!-- Left Content -->
                <div class="text-center lg:text-left relative">
                    <!-- Text Halo/Vignette -->
                    <div
                        class="absolute -inset-10 bg-[radial-gradient(closest-side,var(--bg-core)_40%,transparent_100%)] opacity-80 z-[-1] pointer-events-none blur-xl">
                    </div>

                    <h1
                        class="text-4xl sm:text-5xl lg:text-7xl font-bold mb-6 leading-tight tracking-tight mt-10 lg:mt-0">
                        Відчуй швидкість
                        <span class="text-blue-500 text-glow">реальності</span>
                    </h1>

                    <p class="text-lg text-muted mb-10 max-w-xl mx-auto lg:mx-0 leading-relaxed drop-shadow-sm">
                        Справжні RC-машинки, якими ти керуєш через інтернет.
                        Мінімальна затримка, максимальний драйв.
                    </p>

                    <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                        <a href="auth.html" id="heroAuthBtn"
                            class="bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 transition-all hover:shadow-[0_0_30px_rgba(37,99,235,0.6)] hover:-translate-y-1">
                            Почати подорож
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                            </svg>
                        </a>
                        <a href="#how-it-works"
                            class="px-8 py-4 rounded-2xl font-semibold text-lg border border-[var(--divider)] hover:border-blue-500 text-muted hover:text-[var(--text-primary)] transition-all hover:bg-[var(--glass-bg)]">
                            Як це працює?
                        </a>
                    </div>

                    <!-- Stats -->
                    <div class="grid grid-cols-3 gap-8 mt-16 pt-8 border-t border-white/5 relative z-10">
                        <div>
                            <div class="text-3xl font-bold text-[var(--text-primary)]">50+</div>
                            <div class="text-sm text-muted uppercase tracking-wider mt-1">Машинок</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-[var(--text-primary)]">HD</div>
                            <div class="text-sm text-muted uppercase tracking-wider mt-1">Стрім</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-blue-400">30<span
                                    class="text-base text-muted ml-1">ms</span></div>
                            <div class="text-sm text-muted uppercase tracking-wider mt-1">Ping</div>
                        </div>
                    </div>
                </div>

                <!-- Right Visual -->
                <div class="relative hidden lg:block">
                    <div class="float-animation">
                        <div class="relative z-10">
                            <!-- Car Preview Card with Parallax Effect -->
                            <div id="heroCarPreview"
                                class="card p-6 rounded-3xl glow-blue max-w-md mx-auto relative group">
                                <div
                                    class="absolute -inset-1 bg-gradient-to-r from-blue-600 to-transparent opacity-20 blur rounded-3xl group-hover:opacity-40 transition-opacity">
                                </div>

                                <div class="aspect-video rounded-2xl mb-4 overflow-hidden relative">
                                    <!-- Static Background -->
                                    <div class="absolute inset-0 bg-gradient-to-br from-blue-600/30 to-purple-600/30">
                                    </div>
                                    <div
                                        class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width=%2260%22 height=%2260%22 viewBox=%220 0 60 60%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cg fill=%22none%22 fill-rule=%22evenodd%22%3E%3Cg fill=%22%239C92AC%22 fill-opacity=%220.1%22%3E%3Cpath d=%22M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z%22/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')] opacity-60">
                                    </div>

                                    <!-- Car Image with Parallax Hover -->
                                    <div class="absolute inset-0 flex items-center justify-center p-4">
                                        <img id="heroCarImage"
                                            src="https://images.unsplash.com/photo-1594787318286-3d835c1d207f?auto=format&fit=crop&w=800&q=80"
                                            class="max-h-full max-w-full object-contain transition-transform duration-500 group-hover:scale-110 drop-shadow-2xl"
                                            alt="RC Car">
                                    </div>

                                    <div
                                        class="absolute top-3 left-3 flex items-center gap-2 bg-black/60 backdrop-blur px-2 py-1 rounded border border-white/10 z-10">
                                        <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span>
                                        <span class="text-xs font-bold text-emerald-400">ОНЛАЙН</span>
                                    </div>

                                    <!-- Price Badge -->
                                    <div class="absolute bottom-3 right-3 z-10">
                                        <span id="heroCarPrice"
                                            class="px-2 py-1 rounded bg-emerald-500/90 text-xs font-bold text-white">1
                                            ₴/хв</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center relative z-10">
                                    <div>
                                        <h3 id="heroCarName" class="font-bold text-lg text-white">Завантаження...</h3>
                                        <p id="heroCarDesc" class="text-sm text-slate-500">FPV машинка</p>
                                    </div>
                                    <div
                                        class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="absolute bottom-8 left-1/2 -translate-x-1/2 scroll-indicator text-slate-600">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3">
                </path>
            </svg>
        </div>
    </section>

    <!-- How It Works -->
    <section id="how-it-works" class="py-32 relative z-10">
        <div class="container mx-auto px-6">
            <div class="text-center mb-20">
                <h2 class="text-3xl sm:text-4xl font-bold mb-4">Твій шлях пілота</h2>
                <p class="text-muted text-lg">Всього три кроки відокремлюють тебе від старту</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- Step 1 -->
                <div class="card p-8 rounded-3xl card-hover transition-all duration-300 hover:bg-[var(--glass-bg)]">
                    <div
                        class="w-14 h-14 rounded-2xl bg-blue-500/10 border border-blue-500/20 flex items-center justify-center mb-6 text-blue-500 font-bold text-xl">
                        1
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-[var(--text-primary)]">Обери болід</h3>
                    <p class="text-muted leading-relaxed">В нашому гаражі є все: від швидкісних багі до потужних
                        краулерів для бездоріжжя.</p>
                </div>

                <!-- Step 2 -->
                <div class="card p-8 rounded-3xl card-hover transition-all duration-300 hover:bg-[var(--glass-bg)]">
                    <div
                        class="w-14 h-14 rounded-2xl bg-blue-500/10 border border-blue-500/20 flex items-center justify-center mb-6 text-blue-500 font-bold text-xl">
                        2
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-[var(--text-primary)]">Підключись</h3>
                    <p class="text-muted leading-relaxed">Не потрібно нічого встановлювати. Керування відбувається
                        прямо з браузера.</p>
                </div>

                <!-- Step 3 -->
                <div class="card p-8 rounded-3xl card-hover transition-all duration-300 hover:bg-[var(--glass-bg)]">
                    <div
                        class="w-14 h-14 rounded-2xl bg-blue-500/10 border border-blue-500/20 flex items-center justify-center mb-6 text-blue-500 font-bold text-xl">
                        3
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-[var(--text-primary)]">Тисни на газ!</h3>
                    <p class="text-muted leading-relaxed">Отримуй відеопотік в реальному часі та керуй клавіатурою
                        (WASD).</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="py-32 border-t border-[var(--divider)] relative z-10">
        <div class="container mx-auto px-6">
            <div class="grid lg:grid-cols-2 gap-16 items-center">
                <div>
                    <h2 class="text-3xl sm:text-4xl font-bold mb-6">
                        Технології
                        <span class="text-blue-500">Low Latency</span>
                    </h2>
                    <p class="text-lg text-muted mb-10 leading-relaxed">
                        Ми розробили власну систему передачі відео та команд, яка забезпечує миттєвий відгук навіть
                        через мобільний інтернет.
                    </p>

                    <div class="space-y-8">
                        <div class="flex gap-5">
                            <div
                                class="w-12 h-12 rounded-xl bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center text-blue-600 dark:text-blue-400 flex-shrink-0 border border-blue-200 dark:border-blue-500/20">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold text-[var(--text-primary)] mb-2">WebRTC Core</h3>
                                <p class="text-muted text-sm">Пряме Peer-to-Peer з'єднання для мінімальної затримки.
                                </p>
                            </div>
                        </div>

                        <div class="flex gap-5">
                            <div
                                class="w-12 h-12 rounded-xl bg-blue-100 dark:bg-blue-900/40 flex items-center justify-center text-blue-600 dark:text-blue-400 flex-shrink-0 border border-blue-200 dark:border-blue-500/20">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                                    </path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold text-[var(--text-primary)] mb-2">Secure Link</h3>
                                <p class="text-muted text-sm">Шифрований канал керування захистить від перехоплення.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="hidden lg:block relative group perspective-1000">
                    <!-- Ambient Glow -->
                    <div
                        class="absolute inset-0 bg-blue-500/20 blur-[100px] rounded-full opacity-50 group-hover:opacity-75 transition-opacity duration-1000">
                    </div>

                    <!-- Main Telemetry Card (Tilted) -->
                    <div
                        class="card p-8 rounded-3xl relative transform transition-all duration-500 hover:rotate-y-6 hover:scale-105 backdrop-blur-xl border border-blue-100/50 dark:border-white/10 bg-white/60 dark:bg-white/5 shadow-2xl">
                        <!-- Header -->
                        <div class="flex justify-between items-center mb-8">
                            <div class="flex items-center gap-3">
                                <div class="w-3 h-3 rounded-full bg-emerald-500 animate-pulse box-shadow-glow"></div>
                                <span class="font-mono text-sm text-emerald-600 dark:text-emerald-400 font-bold">СИСТЕМА
                                    АКТИВНА</span>
                            </div>
                            <div class="text-xs font-mono text-slate-500 dark:text-slate-400">NET_ID: 802.11ax</div>
                        </div>

                        <!-- Main Graph Area -->
                        <div
                            class="relative h-32 mb-8 overflow-hidden rounded-xl bg-slate-100 dark:bg-black/40 border border-slate-200 dark:border-white/5 p-4 flex items-end gap-1">
                            <!-- Animated Bars (CSS simulated) -->
                            <div class="w-2 h-12 bg-blue-500/50 rounded-sm"></div>
                            <div class="w-2 h-16 bg-blue-500/60 rounded-sm"></div>
                            <div class="w-2 h-10 bg-blue-500/40 rounded-sm"></div>
                            <div class="w-2 h-20 bg-blue-500/80 rounded-sm"></div>
                            <div class="w-2 h-14 bg-blue-500/60 rounded-sm"></div>
                            <div class="w-2 h-24 bg-blue-400 rounded-sm animate-pulse"></div>
                            <div class="w-2 h-18 bg-blue-500/70 rounded-sm"></div>
                            <div class="w-2 h-12 bg-blue-500/50 rounded-sm"></div>
                            <div class="w-2 h-28 bg-blue-500 rounded-sm"></div>
                            <div class="w-2 h-16 bg-blue-500/60 rounded-sm"></div>

                            <!-- Overlay Text -->
                            <div class="absolute top-2 right-2 text-xs font-bold text-blue-600 dark:text-blue-400">
                                STABLE</div>
                        </div>

                        <!-- Data Grid -->
                        <div class="grid grid-cols-2 gap-4">
                            <div
                                class="p-4 rounded-xl bg-white dark:bg-white/5 border border-slate-100 dark:border-white/5 backdrop-blur-md shadow-sm">
                                <div class="text-xs text-slate-500 dark:text-slate-400 mb-1">Затримка (Ping)</div>
                                <div class="text-2xl font-bold text-slate-800 dark:text-white flex items-end gap-2">
                                    24 <span
                                        class="text-sm font-normal text-slate-500 dark:text-slate-500 mb-1">ms</span>
                                </div>
                                <div
                                    class="w-full bg-slate-200 dark:bg-slate-700 h-1 mt-2 rounded-full overflow-hidden">
                                    <div class="bg-emerald-500 h-full w-[20%]"></div>
                                </div>
                            </div>
                            <div
                                class="p-4 rounded-xl bg-white dark:bg-white/5 border border-slate-100 dark:border-white/5 backdrop-blur-md shadow-sm">
                                <div class="text-xs text-slate-500 dark:text-slate-400 mb-1">Якість відео</div>
                                <div class="text-2xl font-bold text-slate-800 dark:text-white flex items-end gap-2">
                                    1080 <span
                                        class="text-sm font-normal text-slate-500 dark:text-slate-500 mb-1">p60</span>
                                </div>
                                <div
                                    class="w-full bg-slate-200 dark:bg-slate-700 h-1 mt-2 rounded-full overflow-hidden">
                                    <div class="bg-blue-500 h-full w-[95%]"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Footer Decoration -->
                        <div
                            class="mt-6 pt-4 border-t border-slate-100 dark:border-white/5 flex justify-between items-center">
                            <div class="flex gap-2">
                                <div class="w-1.5 h-1.5 rounded-full bg-slate-400 dark:bg-slate-600"></div>
                                <div class="w-1.5 h-1.5 rounded-full bg-slate-400 dark:bg-slate-600"></div>
                                <div class="w-1.5 h-1.5 rounded-full bg-slate-400 dark:bg-slate-600"></div>
                            </div>
                            <div class="text-[10px] text-slate-400 dark:text-slate-500 uppercase tracking-widest">WebRTC
                                Protocol v2.0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-12 border-t border-white/5 relative z-10">
        <div class="container mx-auto px-6 text-center text-sm text-slate-600">
            <div class="flex items-center justify-center gap-2 mb-4">
                <div
                    class="w-8 h-8 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center text-blue-600 dark:text-blue-500">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                </div>
                <span class="font-bold text-slate-700 dark:text-slate-300" data-config="PROJECT_NAME">(NAME)</span>
            </div>
            <p>© 2024 Всі права захищено.</p>
        </div>
    </footer>

    <!-- particles_engine.js removed to prevent conflict with sparks -->
    <script src="js/sparks.js?v=99999999"></script>
    <script src="js/api.js?v=13"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const token = localStorage.getItem('access_token');
            // Helper to modify button state
            const setLoggedIn = (user) => {
                const navbarBtn = document.getElementById('authLink');
                const heroBtn = document.getElementById('heroAuthBtn');

                if (navbarBtn) {
                    navbarBtn.href = 'dashboard.html';
                    navbarBtn.innerHTML = `
                        <div class="flex items-center gap-2">
                            <span>Кабінет</span>
                            <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                        </div>
                    `;
                }

                if (heroBtn) {
                    heroBtn.href = 'dashboard.html';
                    heroBtn.innerHTML = `
                        Обрати авто
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                    `;
                }
            };

            if (token) {
                try {
                    // Quick profile check to ensure token is valid
                    // We can also just trust the token exists for instant UI feedback, 
                    // but verifying avoids broken dashboards.
                    const user = await api.get('/api/users/profile');
                    if (user) {
                        setLoggedIn(user);
                    }
                } catch (e) {
                    // Token invalid, clear it
                    localStorage.removeItem('access_token');
                }
            }

            // Load a random car for hero section
            try {
                const cars = await fetch('/api/cars/').then(r => r.json());
                if (cars && cars.length > 0) {
                    // Pick a random car (or first available)
                    const car = cars.find(c => c.status === 'free') || cars[0];

                    const heroName = document.getElementById('heroCarName');
                    const heroDesc = document.getElementById('heroCarDesc');
                    const heroImage = document.getElementById('heroCarImage');
                    const heroPrice = document.getElementById('heroCarPrice');

                    if (heroName) heroName.textContent = car.name;
                    if (heroDesc) heroDesc.textContent = car.description || 'FPV машинка';
                    if (heroPrice) heroPrice.textContent = (car.price_per_minute || 1) + ' ₴/хв';
                    if (heroImage && car.image_url) {
                        heroImage.src = car.image_url;
                    }
                }
            } catch (e) {
                console.log('Could not load car for hero');
            }
        });
    </script>
</body>

</html>