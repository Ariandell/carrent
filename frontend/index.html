<!DOCTYPE html>
<html lang="uk" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-config="PROJECT_NAME">FPV Racer - Remote Control Experience</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/tailwind_config.js"></script>
    <link href="./css/antigravity.css?v=99" rel="stylesheet">
    <script src="js/config.js?v=99"></script>
    <script src="js/lang.js?v=99"></script>
    <script src="js/theme.js?v=99"></script>
</head>

<body
    class="min-h-screen bg-[var(--bg-core)] text-[var(--text-primary)] transition-colors duration-500 overflow-x-hidden">

    <!-- Theme Toggle Removed (Moved to Settings) -->

    <!-- Navbar -->
    <nav class="nav-glass fixed top-0 left-0 right-0 z-40 border-b border-[var(--divider)]">
        <div class="container mx-auto px-6 h-16 flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-3">
                <div
                    class="w-10 h-10 rounded-xl bg-blue-600 flex items-center justify-center shadow-lg shadow-blue-500/20">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                </div>
                <span class="text-xl font-bold tracking-wide" data-config="PROJECT_NAME">FPV Racer</span>
            </a>
            <div class="flex items-center gap-4">
                <a href="auth.html" id="authLink"
                    class="btn-primary px-6 py-2.5 rounded-xl font-medium text-sm transition-all hover:shadow-[0_0_20px_rgba(37,99,235,0.5)]">
                    Вхід / Реєстрація
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="min-h-screen flex items-center justify-center relative pt-20">
        <!-- Background Glows (Blue Only) -->
        <!-- Background Layers -->
        <!-- Background Layers -->
        <!-- Base Color is now on body -->

        <!-- Sparks Container will be injected here by JS with z-index -2 (actually needs to be relative to this section or fixed) -->
        <!-- Fixed Sparks Container is injected by JS to body path, so we need a glass overlay on TOP of it but BEHIND content? -->
        <!-- User said: "matte glass on background and sparks fly behind it" -->
        <!-- Implementation: Body (Sparks fixed) -> Overlay (Fixed Glass) -> Content (Relative) -->



        <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full max-w-7xl hero-glow pointer-events-none z-0">
        </div>

        <div class="container mx-auto px-6 relative z-10">
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <!-- Left Content -->
                <div class="text-center lg:text-left relative">
                    <!-- Text Halo/Vignette -->
                    <div
                        class="absolute -inset-10 bg-[radial-gradient(closest-side,var(--bg-core)_40%,transparent_100%)] opacity-80 z-[-1] pointer-events-none blur-xl">
                    </div>

                    <h1
                        class="text-4xl sm:text-5xl lg:text-7xl font-bold mb-6 leading-tight tracking-tight mt-10 lg:mt-0">
                        Відчуй швидкість
                        <span class="text-blue-500 text-glow">реальності</span>
                    </h1>

                    <p class="text-lg text-muted mb-10 max-w-xl mx-auto lg:mx-0 leading-relaxed drop-shadow-sm">
                        Справжні RC-машинки, якими ти керуєш через інтернет.
                        Мінімальна затримка, максимальний драйв.
                    </p>

                    <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                        <a href="auth.html" id="heroAuthBtn"
                            class="bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 rounded-2xl font-bold text-lg flex items-center justify-center gap-3 transition-all hover:shadow-[0_0_30px_rgba(37,99,235,0.6)] hover:-translate-y-1">
                            Почати подорож
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                            </svg>
                        </a>
                        <a href="#how-it-works"
                            class="px-8 py-4 rounded-2xl font-semibold text-lg border border-[var(--divider)] hover:border-blue-500 text-muted hover:text-[var(--text-primary)] transition-all hover:bg-[var(--glass-bg)]">
                            Як це працює?
                        </a>
                    </div>

                    <!-- Stats -->
                    <div class="grid grid-cols-3 gap-8 mt-16 pt-8 border-t border-white/5 relative z-10">
                        <div>
                            <div class="text-3xl font-bold text-[var(--text-primary)]">50+</div>
                            <div class="text-sm text-muted uppercase tracking-wider mt-1">Машинок</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-[var(--text-primary)]">HD</div>
                            <div class="text-sm text-muted uppercase tracking-wider mt-1">Стрім</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-blue-400">30<span
                                    class="text-base text-muted ml-1">ms</span></div>
                            <div class="text-sm text-muted uppercase tracking-wider mt-1">Ping</div>
                        </div>
                    </div>
                </div>

                <!-- Right Visual -->
                <div class="relative hidden lg:block">
                    <div class="float-animation">
                        <div class="relative z-10">
                            <!-- Car Preview Card -->
                            <div class="card p-6 rounded-3xl glow-blue max-w-md mx-auto relative group">
                                <div
                                    class="absolute -inset-1 bg-gradient-to-r from-blue-600 to-transparent opacity-20 blur rounded-3xl group-hover:opacity-40 transition-opacity">
                                </div>

                                <div class="aspect-video rounded-2xl bg-black mb-4 overflow-hidden relative">
                                    <img src="https://images.unsplash.com/photo-1594787318286-3d835c1d207f?auto=format&fit=crop&w=800&q=80"
                                        class="w-full h-full object-cover opacity-80 group-hover:scale-105 transition-transform duration-700"
                                        alt="RC Car">
                                    <div
                                        class="absolute top-3 left-3 flex items-center gap-2 bg-black/60 backdrop-blur px-2 py-1 rounded border border-white/10">
                                        <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span>
                                        <span class="text-xs font-bold text-emerald-400">ONLINE</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center relative z-10">
                                    <div>
                                        <h3 class="font-bold text-lg text-white">Defender X1</h3>
                                        <p class="text-sm text-slate-500">Off-road Crawler</p>
                                    </div>
                                    <div
                                        class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <div class="absolute bottom-8 left-1/2 -translate-x-1/2 scroll-indicator text-slate-600">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3">
                </path>
            </svg>
        </div>
    </section>

    <!-- How It Works -->
    <section id="how-it-works" class="py-32 relative z-10">
        <div class="container mx-auto px-6">
            <div class="text-center mb-20">
                <h2 class="text-3xl sm:text-4xl font-bold mb-4">Твій шлях пілота</h2>
                <p class="text-muted text-lg">Всього три кроки відокремлюють тебе від старту</p>
            </div>

            <div class="grid md:grid-cols-3 gap-8">
                <!-- Step 1 -->
                <div class="card p-8 rounded-3xl card-hover transition-all duration-300 hover:bg-[var(--glass-bg)]">
                    <div
                        class="w-14 h-14 rounded-2xl bg-blue-500/10 border border-blue-500/20 flex items-center justify-center mb-6 text-blue-500 font-bold text-xl">
                        1
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-[var(--text-primary)]">Обери болід</h3>
                    <p class="text-muted leading-relaxed">В нашому гаражі є все: від швидкісних багі до потужних
                        краулерів для бездоріжжя.</p>
                </div>

                <!-- Step 2 -->
                <div class="card p-8 rounded-3xl card-hover transition-all duration-300 hover:bg-[var(--glass-bg)]">
                    <div
                        class="w-14 h-14 rounded-2xl bg-blue-500/10 border border-blue-500/20 flex items-center justify-center mb-6 text-blue-500 font-bold text-xl">
                        2
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-[var(--text-primary)]">Підключись</h3>
                    <p class="text-muted leading-relaxed">Не потрібно нічого встановлювати. Керування відбувається
                        прямо з браузера.</p>
                </div>

                <!-- Step 3 -->
                <div class="card p-8 rounded-3xl card-hover transition-all duration-300 hover:bg-[var(--glass-bg)]">
                    <div
                        class="w-14 h-14 rounded-2xl bg-blue-500/10 border border-blue-500/20 flex items-center justify-center mb-6 text-blue-500 font-bold text-xl">
                        3
                    </div>
                    <h3 class="font-bold text-xl mb-3 text-[var(--text-primary)]">Тисни на газ!</h3>
                    <p class="text-muted leading-relaxed">Отримуй відеопотік в реальному часі та керуй клавіатурою
                        (WASD).</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Features -->
    <section class="py-32 border-t border-[var(--divider)] relative z-10">
        <div class="container mx-auto px-6">
            <div class="grid lg:grid-cols-2 gap-16 items-center">
                <div>
                    <h2 class="text-3xl sm:text-4xl font-bold mb-6">
                        Технології
                        <span class="text-blue-500">Low Latency</span>
                    </h2>
                    <p class="text-lg text-muted mb-10 leading-relaxed">
                        Ми розробили власну систему передачі відео та команд, яка забезпечує миттєвий відгук навіть
                        через мобільний інтернет.
                    </p>

                    <div class="space-y-8">
                        <div class="flex gap-5">
                            <div
                                class="w-12 h-12 rounded-xl bg-blue-900/40 flex items-center justify-center text-blue-400 flex-shrink-0 border border-blue-500/20">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold text-[var(--text-primary)] mb-2">WebRTC Core</h3>
                                <p class="text-muted text-sm">Пряме Peer-to-Peer з'єднання для мінімальної затримки.
                                </p>
                            </div>
                        </div>

                        <div class="flex gap-5">
                            <div
                                class="w-12 h-12 rounded-xl bg-blue-900/40 flex items-center justify-center text-blue-400 flex-shrink-0 border border-blue-500/20">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                                    </path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold text-[var(--text-primary)] mb-2">Secure Link</h3>
                                <p class="text-muted text-sm">Шифрований канал керування захистить від перехоплення.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="hidden lg:block relative">
                    <div class="absolute inset-0 bg-blue-500/10 blur-3xl rounded-full"></div>
                    <div class="card p-8 rounded-3xl relative">
                        <div
                            class="aspect-video rounded-2xl bg-black flex items-center justify-center mb-6 relative overflow-hidden border border-[var(--divider)]">
                            <div
                                class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1558618666-fcd25c85cd64?auto=format&fit=crop&w=800&q=80')] bg-cover bg-center opacity-40">
                            </div>

                            <!-- Fake HUD -->
                            <div class="absolute inset-0 p-4 flex flex-col justify-between">
                                <div class="flex justify-between">
                                    <div class="text-[10px] text-green-400 font-mono">REC ●</div>
                                    <div class="text-[10px] text-white font-mono">BAT 98%</div>
                                </div>
                                <div class="flex justify-center">
                                    <div
                                        class="w-8 h-8 border border-white/30 rounded-full flex items-center justify-center">
                                        <div class="w-1 h-1 bg-white rounded-full"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="absolute inset-0 flex items-center justify-center">
                                <div
                                    class="w-16 h-16 rounded-full bg-blue-600/90 hover:bg-blue-500 cursor-pointer flex items-center justify-center shadow-lg shadow-blue-500/50 transition-all">
                                    <svg class="w-6 h-6 text-white ml-1" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M8 5v14l11-7z" />
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="font-bold text-[var(--text-primary)]">Інтерфейс пілота</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-12 border-t border-white/5 relative z-10">
        <div class="container mx-auto px-6 text-center text-sm text-slate-600">
            <div class="flex items-center justify-center gap-2 mb-4">
                <div class="w-8 h-8 rounded-lg bg-blue-900/50 flex items-center justify-center text-blue-500">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                </div>
                <span class="font-bold text-slate-300">FPV Racer</span>
            </div>
            <p>© 2024 Всі права захищено.</p>
        </div>
    </footer>

    <!-- particles_engine.js removed to prevent conflict with sparks -->
    <script src="js/sparks.js?v=99999999"></script>
    <script src="js/api.js?v=13"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const token = localStorage.getItem('access_token');
            // Helper to modify button state
            const setLoggedIn = (user) => {
                const navbarBtn = document.getElementById('authLink');
                const heroBtn = document.getElementById('heroAuthBtn');

                if (navbarBtn) {
                    navbarBtn.href = 'dashboard.html';
                    navbarBtn.innerHTML = `
                        <div class="flex items-center gap-2">
                            <span>Кабінет</span>
                            <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                        </div>
                    `;
                }

                if (heroBtn) {
                    heroBtn.href = 'dashboard.html';
                    heroBtn.innerHTML = `
                        Обрати авто
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                        </svg>
                    `;
                }
            };

            if (token) {
                try {
                    // Quick profile check to ensure token is valid
                    // We can also just trust the token exists for instant UI feedback, 
                    // but verifying avoids broken dashboards.
                    const user = await api.get('/api/users/profile');
                    if (user) {
                        setLoggedIn(user);
                    }
                } catch (e) {
                    // Token invalid, clear it
                    localStorage.removeItem('access_token');
                }
            }
        });
    </script>
</body>

</html>